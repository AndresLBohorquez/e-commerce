<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:html5="http://xmlns.jcp.org/jsf/passthrough">

    <ui:composition>

        <!-- Navbar-->
        <!-- Floating Navbar (Transparent version)-->
        <header class="navbar d-block navbar-sticky navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand d-none d-sm-block mr-4 order-lg-1" href="" style="min-width: 7rem;"><img width="142" src="#{request.contextPath}/assets/front_end/components/logo-01011.png" alt="EsquinaLlanera" /></a>
                <a class="navbar-brand d-sm-none mr-2 order-lg-1" href="" style="min-width: 4.625rem;"><img width="99" src="#{request.contextPath}/assets/front_end/components/logo-01011.png" alt="LaEsquinaLlanera" /></a>
                <div class="navbar-toolbar d-flex align-items-center order-lg-3">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="navbar-tool dropdown ml-2">
                        <a class="navbar-tool-icon-box border dropdown-toggle" href="#{request.contextPath}/usuarios/client/perfil.xhtml">
                            <h:graphicImage style="width: 50px; height: 45px" width="50" value="/imgprofile/#{userSession.usuarioLogin.fotoPerfil}" class="rounded-circle" alt="Img-x" />
                        </a>
                        <a class="navbar-tool-text ml-n1" href="#{request.contextPath}/usuarios/client/perfil.xhtml"> <small>#{userSession.usuarioLogin.nombre} #{userSession.usuarioLogin.apellido}</small>#{userSession.usuarioLogin.email} </a>
                        <div class="dropdown-menu dropdown-menu-right" style="min-width: 14rem;">
                            <h6 class="dropdown-header">Cuenta</h6>
                            <a class="dropdown-item d-flex align-items-center" href="#{request.contextPath}/usuarios/client/perfil.xhtml"> <i class="czi-settings opacity-60 mr-2"></i>Perfil </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item d-flex align-items-center" href="#{request.contextPath}/usuarios/client/perfil-ordenes.xhtml"> <i class="czi-basket opacity-60 mr-2"></i>Ã“rdenes</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item d-flex align-items-center" href="#{request.contextPath}/usuarios/client/servicio-al-cliente.xhtml"> <i class="czi-currency-exchange opacity-60 mr-2"></i>Servicio al cliente </a>
                            <div class="dropdown-divider"></div>
                            <h:form>
                                <h:commandLink action="#{userSession.cerrarSesion()}" class="dropdown-item d-flex align-items-center"> <i class="czi-sign-out opacity-60 mr-2"></i>Salir </h:commandLink>
                            </h:form>
                        </div>
                    </div>
                    <div class="navbar-tool dropdown ml-3">
                        <a class="navbar-tool-icon-box bg-secondary dropdown-toggle" href="#{request.contextPath}/usuarios/client/order.xhtml">
                            <span class="navbar-tool-label">#{productSession.contarProductosCarrito}</span><i class="navbar-tool-icon czi-cart"></i>
                        </a>
                        <a class="navbar-tool-text" href="#{request.contextPath}/usuarios/client/checkout.xhtml">
                            <small>Carrito</small>$#{productSession.subtotal}
                        </a>
                        <!-- Cart dropdown-->
                        <div class="dropdown-menu dropdown-menu-right" style="width: 20rem;">
                            <div class="widget widget-cart px-3 pt-2 pb-3">
                                <div style="height: 15rem;" data-simplebar="true" data-simplebar-auto-hide="false">
                                    <c:forEach items="#{productSession.articulos}" var="carrito">
                                        <!--item-->

                                        <div class="widget-cart-item pb-2">
                                            <h:form>
                                                <h:commandLink action="#{productSession.eliminarProductoCarrito(carrito)}" class="close text-danger" html5:aria-label="Remove"><span aria-hidden="true">&times;</span></h:commandLink>
                                            </h:form>
                                            <div class="media align-items-center">
                                                <a class="d-block mr-2" href="shop-single-v1.html">
                                                    <h:graphicImage width="64" value="/images/#{carrito.imagen}" alt="Product"/>
                                                </a>
                                                <div class="media-body">
                                                    <h6 class="widget-product-title"><a href="shop-single-v1.html">#{carrito.nombre}</a></h6>
                                                    <div class="widget-product-meta"><span class="text-accent mr-2">#{carrito.precio}</span>x#{carrito.cantidad}<span class="text-muted"></span></div>
                                                </div>
                                            </div>
                                        </div>

                                    </c:forEach>
                                </div>
                                <div class="d-flex flex-wrap justify-content-between align-items-center py-3">
                                    <div class="font-size-sm mr-2 py-2"><span class="text-muted">Subtotal:</span><span class="text-accent font-size-base ml-1">#{productSession.subtotal}</span></div>
                                    <a class="btn btn-outline-secondary btn-sm" href="#{request.contextPath}/usuarios/client/order.xhtml">Expandir<i class="czi-arrow-right ml-1 mr-n1"></i></a>
                                </div>
                                <a class="btn btn-success btn-sm btn-block" href="#{request.contextPath}/usuarios/client/checkout.xhtml"><i class="czi-card mr-2 font-size-base align-middle"></i>Pagar</a>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="collapse navbar-collapse mr-auto order-lg-2" id="navbarCollapse">
                    <!-- Search (mobile)-->
                    <div class="d-lg-none py-3">
                        <div class="input-group-overlay">
                            <div class="input-group-prepend-overlay">
                                <span class="input-group-text"><i class="czi-search"></i></span>
                            </div>
                            <input class="form-control prepended-form-control" type="text" placeholder="What do you need?" />
                        </div>
                    </div>
                   
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="#{request.contextPath}/usuarios/index.xhtml">Inicio</a></li>
                        <li class="nav-item"><a class="nav-link" href="#{request.contextPath}/usuarios/client/platos.xhtml">Menu</a></li>
                    </ul>
                </div>
            </div>
            <!-- Search collapse-->
            <div class="search-box collapse" id="searchBox">
                <div class="container py-2">
                    <div class="input-group-overlay">
                        <div class="input-group-prepend-overlay">
                            <span class="input-group-text"><i class="czi-search"></i></span>
                        </div>
                        <input class="form-control prepended-form-control" type="text" placeholder="What do you need?" />
                    </div>
                </div>
            </div>
        </header>

    </ui:composition>


</html>

